(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),i=t(3),u=t(2),a=t(0),o=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Numbers"}),e.persons.map((function(n){return Object(a.jsxs)("div",{children:[n.name+" "+n.number," ",Object(a.jsx)("button",{onClick:function(){return e.deleteHandler(n)},children:"delete"})]},n.id)}))]})},s=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{onChange:e.nameChange})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{onChange:e.numberChange})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",onClick:e.submit,children:"add"})})]})]})};function j(e,n){return 0===e.trim().length?n:n.filter((function(n){return n.name.toLowerCase().includes(e.trim().toLowerCase())}))}var d=function(e){return Object(a.jsxs)("div",{children:["filter shown with ",Object(a.jsx)("input",{onChange:e.searchChange})]})},f=t(4),b=t.n(f),l="/api/persons",h=function(){return b.a.get(l).then((function(e){return e.data}))},m=function(e){return b.a.post(l,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},g=function(e){return null===e.message?null:Object(a.jsx)("div",{className:e.type,children:e.message})},x=function(){var e=Object(u.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(t),f=Object(i.a)(r,2),b=f[0],l=f[1],x=Object(u.useState)(""),v=Object(i.a)(x,2),C=v[0],w=v[1],k=Object(u.useState)(""),S=Object(i.a)(k,2),y=S[0],D=S[1],E=Object(u.useState)(""),F=Object(i.a)(E,2),H=F[0],J=F[1],L=Object(u.useState)(""),N=Object(i.a)(L,2),U=N[0],B=N[1],I=Object(u.useState)(""),P=Object(i.a)(I,2),T=P[0],q=P[1];function z(e){c(e),l(j(H,e))}function A(e,n){B(e),q(n),setTimeout((function(){B(null),q("")}),5e3)}Object(u.useEffect)((function(){console.log("effect"),h().then((function(e){c(e),l(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(g,{message:U,type:T}),Object(a.jsx)(d,{searchChange:function(e){J(e.target.value),l(j(e.target.value,t))}}),Object(a.jsx)(s,{numberChange:function(e){return D(e.target.value)},nameChange:function(e){return w(e.target.value)},submit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===C})),c={name:C,number:y};if(n.length>0){if(!window.confirm("Update "+C))return;O(n[0].id,c).then((function(e){z(t.filter((function(n){return n.id!==e.id})).concat(e)),A("Updated "+c.name,"confirmation")})).catch((function(e){A("Could not update "+c.name,"error")}))}else m(c).then((function(e){z(t.concat(e)),A("Created "+c.name,"confirmation")}))}}),Object(a.jsx)(o,{persons:b,deleteHandler:function(e){window.confirm("Delete "+e.name)&&p(e.id).then((function(){z(t.filter((function(n){return n.id!==e.id}))),A("Deleted "+e.name,"confirmation")})).catch((function(n){A("Could not delete "+e.name,"error"),h().then((function(e){c(e),l(e)}))}))}})]})};t(40);r.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a6f0ac35.chunk.js.map