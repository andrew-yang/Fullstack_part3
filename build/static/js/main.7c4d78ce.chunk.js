(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(3),o=t(2),i=t(0),u=function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"Numbers"}),e.persons.map((function(n){return Object(i.jsxs)("div",{children:[n.name+" "+n.number," ",Object(i.jsx)("button",{onClick:function(){return e.deleteHandler(n)},children:"delete"})]},n.id)}))]})},s=function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:e.nameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:e.numberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",onClick:e.submit,children:"add"})})]})]})};function j(e,n){return 0===e.trim().length?n:n.filter((function(n){return n.name.toLowerCase().includes(e.trim().toLowerCase())}))}var d=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{onChange:e.searchChange})]})},f=t(4),b=t.n(f),h="/api/persons",l=function(){return b.a.get(h).then((function(e){return e.data}))},m=function(e){return b.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},g=function(e){return null===e.message?null:Object(i.jsx)("div",{className:e.type,children:e.message})},x=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(t),f=Object(a.a)(r,2),b=f[0],h=f[1],x=Object(o.useState)(""),v=Object(a.a)(x,2),C=v[0],w=v[1],k=Object(o.useState)(""),S=Object(a.a)(k,2),y=S[0],D=S[1],E=Object(o.useState)(""),F=Object(a.a)(E,2),H=F[0],J=F[1],L=Object(o.useState)(""),N=Object(a.a)(L,2),U=N[0],B=N[1],I=Object(o.useState)(""),P=Object(a.a)(I,2),T=P[0],q=P[1];function z(e){c(e),h(j(H,e))}function A(e,n){B(e),q(n),setTimeout((function(){B(null),q("")}),5e3)}Object(o.useEffect)((function(){console.log("effect"),l().then((function(e){c(e),h(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(g,{message:U,type:T}),Object(i.jsx)(d,{searchChange:function(e){J(e.target.value),h(j(e.target.value,t))}}),Object(i.jsx)(s,{numberChange:function(e){return D(e.target.value)},nameChange:function(e){return w(e.target.value)},submit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===C})),c={name:C,number:y};if(n.length>0){if(!window.confirm("Update "+C))return;O(n[0].id,c).then((function(e){z(t.filter((function(n){return n.id!==e.id})).concat(e)),A("Updated "+c.name,"confirmation")})).catch((function(e){console.log(e.response.data),A(e.response.data.error,"error")}))}else m(c).then((function(e){z(t.concat(e)),A("Created "+c.name,"confirmation")})).catch((function(e){A(e.response.data.error,"error")}))}}),Object(i.jsx)(u,{persons:b,deleteHandler:function(e){window.confirm("Delete "+e.name)&&p(e.id).then((function(){z(t.filter((function(n){return n.id!==e.id}))),A("Deleted "+e.name,"confirmation")})).catch((function(e){A(e.response.data.error,"error"),l().then((function(e){c(e),h(e)}))}))}})]})};t(40);r.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.7c4d78ce.chunk.js.map